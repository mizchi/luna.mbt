import"./modulepreload-polyfill-CXK8biUa.js";var e={$tag:0};function t(e){this._0=e}t.prototype.$tag=1;function n(e){this._0=e}n.prototype.$tag=0;function r(e){this._0=e}r.prototype.$tag=1;function i(e){this._0=e}i.prototype.$tag=2;function a(e){this._0=e}a.prototype.$tag=0;function o(e){this._0=e}o.prototype.$tag=1;function s(e){this._0=e}s.prototype.$tag=2;function c(e){this._0=e}c.prototype.$tag=3;var l=class extends Error{};function u(){throw new l}function d(e,t){if(t<0||t>=e.length)throw Error(`Index out of bounds`)}function f(e,t){let n=Array(e);return n.fill(t),n}function p(e){this._0=e}p.prototype.$tag=0;function m(e){this._0=e}m.prototype.$tag=1;var ee={$tag:1},te={$tag:0},ne=(e,t)=>e.toString(t),h=(e,t)=>{e.push(t)},re={$tag:0};function ie(e){this._0=e}ie.prototype.$tag=1;function ae(e){this._0=e}ae.prototype.$tag=2;function oe(e){this._0=e}oe.prototype.$tag=3;function se(e){this._0=e}se.prototype.$tag=4;var ce=e=>e.slice(0),le=(e,t)=>{e.length=t},ue=e=>e.pop(),de=(e,t)=>e[t],g=(e,t,n)=>e[t](...n),fe=e=>e==null,pe=()=>({}),_=(e,t,n)=>{e[t]=n},me={$tag:0};function he(e){this._0=e}he.prototype.$tag=1;var ge=()=>globalThis,_e=()=>document,ve=(e,t)=>e.createElement(t),ye=(e,t)=>e.createTextNode(t);function be(e){this._0=e}be.prototype.$tag=0;function xe(e){this._0=e}xe.prototype.$tag=1;function Se(e){this._0=e}Se.prototype.$tag=2;function Ce(e){this._0=e}Ce.prototype.$tag=3;var we=(e,t,n)=>e.addEventListener(t,n),v=(e,t)=>(e.click=t,e),Te=e=>Object.entries(e).map(([e,t])=>({_0:e,_1:{$tag:2,_0:t}})),y={$tag:0};function Ee(e){this._0=e}Ee.prototype.$tag=1;var De=()=>window.location.pathname,Oe=()=>window.location.search,ke=e=>window.history.pushState(null,``,e),Ae=e=>window.addEventListener(`popstate`,()=>e());function b(e,t,n,r){this._0=e,this._1=t,this._2=n,this._3=r}b.prototype.$tag=0;function je(e,t,n){this._0=e,this._1=t,this._2=n}je.prototype.$tag=1;function Me(e,t){this._0=e,this._1=t}Me.prototype.$tag=2;function Ne(e,t){this._0=e,this._1=t}Ne.prototype.$tag=3;var x={$tag:0};function S(e){this._0=e}S.prototype.$tag=1;var C={$tag:0};function w(e){this._0=e}w.prototype.$tag=1;var T={$tag:0};function Pe(e){this._0=e}Pe.prototype.$tag=1;var Fe={method_0:un,method_1:dn,method_2:Cn,method_3:Zt},Ie=`:`,Le=`:`,Re=`-`,ze=`:`,Be=`:`,Ve=`/`,He=`/`,Ue=0,We=0,Ge={val:0},E={current_subscriber:void 0,current_owner:void 0,current_cleanups:e,batch_depth:0,pending_effects:[],pending_ids:[]},Ke={_0:`disabled`,_1:new n(`true`)},qe=`[`,Je=`]`,Ye=`[...`,Xe=`[[...`,Ze=`:`,Qe=`[`,$e=`[...`,et=`[[...`,tt=`]`,nt=`[[...`,rt=`]]`,it=`[...`,at=`]`,ot=`/demo/browser_router`,st=`background: #333; padding: 10px;`,ct=`color: white; margin-right: 20px;`,lt=`color: white; margin-right: 20px;`,ut=`color: white; margin-right: 20px;`,dt=`color: white; margin-right: 20px;`,ft=`counter`,pt={_0:`data-testid`,_1:new a(`counter`)},mt={_0:`data-testid`,_1:new a(`count-display`)},ht=`counter-buttons`,gt={_0:`data-testid`,_1:new a(`decrement-btn`)},_t={_0:`data-testid`,_1:new a(`increment-btn`)},vt={_0:`data-testid`,_1:new a(`reset-btn`)},yt=`page home`,bt={_0:`data-page`,_1:new a(`home`)},xt={_0:`data-testid`,_1:new a(`current-path`)},St=`page about`,Ct={_0:`data-page`,_1:new a(`about`)},wt=`users-layout`,Tt=`border: 2px solid #007bff; padding: 15px; margin: 10px 0;`,Et=`background: #007bff; color: white; padding: 10px; margin: -15px -15px 15px -15px;`,Dt=`margin: 0;`,Ot=`margin: 5px 0 0 0; font-size: 0.9em;`,kt=`margin-bottom: 10px;`,At=`margin-right: 10px;`,jt=`margin-right: 10px;`,Mt=`margin-right: 10px;`,Nt=`users-list`,Pt=`user-detail`,Ft=`color: #666; font-style: italic;`,It=`settings-index`,Lt=`settings-profile`,Rt=`not-found`,zt=`app`,Bt=`font-family: system-ui, sans-serif; max-width: 800px; margin: 0 auto;`,Vt=`padding: 20px;`;function Ht(e){return u()}function Ut(e){return u()}function Wt(e){u()}function Gt(e){return u()}function Kt(e,t){return e===0?t===0:t===1}function qt(e,t){return Ht(`${e}\n  at ${mn(t)}\n`)}function Jt(e,t){return Ut(`${e}\n  at ${mn(t)}\n`)}function Yt(e,t){Wt(`${e}\n  at ${mn(t)}\n`)}function Xt(e,t){return Gt(`${e}\n  at ${mn(t)}\n`)}function D(e){return{val:``}}function Zt(e,t){let n=e;n.val=`${n.val}${String.fromCodePoint(t)}`}function Qt(e,t){return(((Math.imul(e-55296|0,1024)|0)+t|0)-56320|0)+65536|0}function $t(e,t){return!Kt(e,t)}function O(e,t){let n=e.length;return t>=0&&t<n?(d(e,t),e[t]):u()}function en(e,t){let n=e.length;return t>=0&&t<n?(d(e,t),e[t]):u()}function tn(e,t){let n=e.length;return t>=0&&t<n?(d(e,t),e[t]):u()}function nn(e,t){let n=e.end-e.start|0,r=t.end-t.start|0;if(r>0)if(n>=r){let i=f(256,r),a=r-1|0,o=0;for(;;){let e=o;if(e<a){let n=t.str,a=t.start+e|0,s=n.charCodeAt(a)&255;d(i,s),i[s]=(r-1|0)-e|0,o=e+1|0;continue}else break}let s=0;for(;;){let a=s;if(a<=(n-r|0)){let n=r-1|0,o=0;for(;;){let r=o;if(r<=n){let n=a+r|0,i=e.str,s=e.start+n|0,c=i.charCodeAt(s),l=t.str,u=t.start+r|0;if(c!==l.charCodeAt(u))break;o=r+1|0;continue}else return a}let c=(a+r|0)-1|0,l=e.str,u=e.start+c|0,f=l.charCodeAt(u)&255;d(i,f),s=a+i[f]|0;continue}else break}return}else return;else return Ue}function rn(e,t){let n=e.end-e.start|0,r=t.end-t.start|0;if(r>0)if(n>=r){let i=t.str,a=t.start+0|0,o=i.charCodeAt(a),s=n-r|0,c=0;for(;c<=s;){for(;;){let t;if(c<=s){let n=c,r=e.str,i=e.start+n|0;t=r.charCodeAt(i)!==o}else t=!1;if(t){c=c+1|0;continue}else break}if(c<=s){let n=1;for(;;){let i=n;if(i<r){let r=c+i|0,a=e.str,o=e.start+r|0,s=a.charCodeAt(o),l=t.str,u=t.start+i|0;if(s!==l.charCodeAt(u))break;n=i+1|0;continue}else return c}c=c+1|0}}return}else return;else return We}function k(e,t){return(t.end-t.start|0)<=4?rn(e,t):nn(e,t)}function an(e,t){let n=e.end-e.start|0,r=t.end-t.start|0;if(r>0)if(n>=r){let i=f(256,r),a=r-1|0;for(;;){let e=a;if(e>0){let n=t.str,r=t.start+e|0,o=n.charCodeAt(r)&255;d(i,o),i[o]=e,a=e-1|0;continue}else break}let o=n-r|0;for(;;){let n=o;if(n>=0){let a=0;for(;;){let i=a;if(i<r){let r=n+i|0,o=e.str,s=e.start+r|0,c=o.charCodeAt(s),l=t.str,u=t.start+i|0;if(c!==l.charCodeAt(u))break;a=i+1|0;continue}else return n}let s=e.str,c=e.start+n|0,l=s.charCodeAt(c)&255;d(i,l),o=n-i[l]|0;continue}else break}return}else return;else return n}function on(e,t){let n=e.end-e.start|0,r=t.end-t.start|0;if(r>0)if(n>=r){let i=t.str,a=t.start+0|0,o=i.charCodeAt(a),s=n-r|0;for(;s>=0;){for(;;){let t;if(s>=0){let n=s,r=e.str,i=e.start+n|0;t=r.charCodeAt(i)!==o}else t=!1;if(t){s=s-1|0;continue}else break}if(s>=0){let n=1;for(;;){let i=n;if(i<r){let r=s+i|0,a=e.str,o=e.start+r|0,c=a.charCodeAt(o),l=t.str,u=t.start+i|0;if(c!==l.charCodeAt(u))break;n=i+1|0;continue}else return s}s=s-1|0}}return}else return;else return n}function sn(e,t){return(t.end-t.start|0)<=4?on(e,t):an(e,t)}function A(e,t,n){let r;return r=n===void 0?e.end-e.start|0:n,t>=0&&t<=r&&r<=(e.end-e.start|0)?{str:e.str,start:e.start+t|0,end:e.start+r|0}:Jt(`Invalid index for View`,`@moonbitlang/core/builtin:stringview.mbt:111:5-111:36`)}function cn(e){let t=k(e,{str:Ie,start:0,end:1});if(t!==void 0){let n=t;return n>0&&(n+1|0)<(e.end-e.start|0)?{_0:A(e,0,n),_1:A(e,n+1|0,void 0)}:void 0}}function ln(e){_L:if(yn(e,1,0,e.length))if(e.charCodeAt(0)===64){let t=Sn(e,1,0,e.length),n;n=t===void 0?e.length:t;let r={str:e,start:n,end:e.length},i=k(r,{str:Le,start:0,end:1});if(i===void 0)return u();{let e=i,t=A(r,0,e),n=sn(r,{str:Re,start:0,end:1});if(n===void 0)return u();{let i=n;if((i+1|0)<(r.end-r.start|0)){let n=cn(A(r,i+1|0,void 0));if(n===void 0)return u();{let a=n,o=a._0,s=a._1,c=A(r,0,i);_L$2:{let n=sn(c,{str:ze,start:0,end:1});if(n===void 0)break _L$2;{let r=sn(A(c,0,n),{str:Be,start:0,end:1});if(r===void 0)break _L$2;{let n=r;if((n+1|0)<(c.end-c.start|0)){let r=cn(A(c,n+1|0,void 0));if(r===void 0)return u();{let i=r,a=i._0,l=i._1;return n>(e+1|0)?{pkg:t,filename:A(c,e+1|0,n),start_line:a,start_column:l,end_line:o,end_column:s}:u()}}else return u()}}}return u()}}else return u()}}}else break _L;else break _L;return u()}function un(e,t){let n=e;n.val=`${n.val}${t}`}function j(e,t,n){let r=e.length,i;if(n===void 0)i=r;else{let e=n;i=e<0?r+e|0:e}let a=t<0?r+t|0:t;if(a>=0&&a<=i&&i<=r){let t;if(a<r){let n=e.charCodeAt(a);t=56320<=n&&n<=57343}else t=!1;if(t)return new p(te);let n;if(i<r){let t=e.charCodeAt(i);n=56320<=t&&t<=57343}else n=!1;return n?new p(te):new m({str:e,start:a,end:i})}else return new p(ee)}function dn(e,t,n,r){let i;_L:{_L$2:{let e=j(t,n,n+r|0);if(e.$tag===1)i=e._0;else{e._0;break _L$2}break _L}i=u()}Cn(e,i)}function fn(e){let t=D(0),n={self:t,method_table:Fe};return e?n.method_table.method_0(n.self,`true`):n.method_table.method_0(n.self,`false`),t.val}function pn(e){let t=D(0);return Vr(e,{self:t,method_table:Fe}),t.val}function mn(e){let t=D(0);return Vn(e,{self:t,method_table:Fe}),t.val}function M(e,t){return ne(e,t)}function N(e){return e.str.substring(e.start,e.end)}function hn(e){return e()}function gn(e){return e()}function _n(e){return t=>{for(;;){let n=hn(e);if(n===void 0)return 1;if(t(n)!==1)return 0}}}function vn(e){return t=>{for(;;){let n=gn(e);if(n===-1)return 1;if(t(n)!==1)return 0}}}function P(e){let t=D(Math.imul(e.end-e.start|0,4)|0),n=e.end-e.start|0,r=0;for(;;){let i=r;if(i<n){let n=e.buf[e.start+i|0];Zt(t,n),r=i+1|0;continue}else break}return t.val}function yn(e,t,n,r){let i;i=r===void 0?e.length:r;let a=n,o=0;for(;;){let n=a,r=o;if(n<i&&r<t){let t=e.charCodeAt(n);if(55296<=t&&t<=56319&&(n+1|0)<i){let t=n+1|0,i=e.charCodeAt(t);if(56320<=i&&i<=57343){a=n+2|0,o=r+1|0;continue}else Yt(`invalid surrogate pair`,`@moonbitlang/core/builtin:string.mbt:491:9-491:40`)}a=n+1|0,o=r+1|0;continue}else return r>=t}}function bn(e,t,n,r){let i=0,a=r;for(;(a-1|0)>=n&&i<t;){let t=a-1|0,n=e.charCodeAt(t);a=56320<=n&&n<=57343?a-2|0:a-1|0,i=i+1|0}return i<t||a<n?void 0:a}function xn(e,t,n,r){if(n>=0&&n<=r){let i=n,a=0;for(;i<r&&a<t;){let t=i,n=e.charCodeAt(t);i=55296<=n&&n<=56319?i+2|0:i+1|0,a=a+1|0}return a<t||i>=r?void 0:i}else return Xt(`Invalid start index`,`@moonbitlang/core/builtin:string.mbt:366:5-366:33`)}function Sn(e,t,n,r){let i;return i=r===void 0?e.length:r,t>=0?xn(e,t,n,i):bn(e,-t|0,n,i)}function Cn(e,t){let n=e;n.val=`${n.val}${N(t)}`}function wn(e,t){let n=sn(e,t);return n===void 0?!1:n===((e.end-e.start|0)-(t.end-t.start|0)|0)}function F(e,t){return wn({str:e,start:0,end:e.length},t)}function Tn(e,t){let n=k(e,t);return n===void 0?!1:n===0}function I(e,t){return Tn({str:e,start:0,end:e.length},t)}function En(e){return[]}function L(e,t){h(e,t)}function R(e,t){h(e,t)}function Dn(e,t){h(e,t)}function z(e,t){h(e,t)}function B(e,t){h(e,t)}function On(e,t){h(e,t)}function kn(e,t){h(e,t)}function An(e,t){h(e,t)}function jn(e){let t=e.length,n={val:0};return()=>{if(n.val<t){let r=n.val,i=e.charCodeAt(r);if(55296<=i&&i<=56319&&(n.val+1|0)<t){let t=n.val+1|0,r=e.charCodeAt(t);if(56320<=r&&r<=57343){let e=Qt(i,r);return n.val=n.val+2|0,e}}return n.val=n.val+1|0,i}else return-1}}function Mn(e){return vn(jn(e))}function Nn(e,t){return e(t)}function Pn(e){return String.fromCodePoint(e)}function Fn(e){let t=Mn(e),n={val:En(e.length)},r={val:re};t(e=>{let t=n.val;return kn(t,e),n.val=t,1});let i=r.val;switch(i.$tag){case 0:break;case 1:i._0;break;case 2:return i._0;case 3:u();break;default:u()}return n.val}function In(e){let t={val:0};return()=>{if(t.val<(e.end-e.start|0)){let n=e.buf[e.start+t.val|0];return t.val=t.val+1|0,n}else return}}function Ln(e){return In({buf:e,start:0,end:e.length})}function Rn(e){return _n(Ln(e))}function zn(e,t){return $t(Nn(e,e=>t(e)?0:1),1)}function Bn(e,t){let n=e.pkg,r=k(n,{str:Ve,start:0,end:1}),i;if(r===void 0)i={_0:n,_1:void 0};else{let e=r,t=k(A(n,e+1|0,void 0),{str:He,start:0,end:1});if(t===void 0)i={_0:n,_1:void 0};else{let r=t,a=(e+1|0)+r|0;i={_0:A(n,0,a),_1:A(n,a+1|0,void 0)}}}let a=i._0,o=i._1;if(o!==void 0){let e=o;t.method_table.method_2(t.self,e),t.method_table.method_3(t.self,47)}t.method_table.method_2(t.self,e.filename),t.method_table.method_3(t.self,58),t.method_table.method_2(t.self,e.start_line),t.method_table.method_3(t.self,58),t.method_table.method_2(t.self,e.start_column),t.method_table.method_3(t.self,45),t.method_table.method_2(t.self,e.end_line),t.method_table.method_3(t.self,58),t.method_table.method_2(t.self,e.end_column),t.method_table.method_3(t.self,64),t.method_table.method_2(t.self,a)}function Vn(e,t){Bn(ln(e),t)}function Hn(e,t,n){let r=e.length,i;if(n===void 0)i=r;else{let e=n;i=e<0?r+e|0:e}let a=t<0?r+t|0:t;return a>=0&&a<=i&&i<=r?{buf:e,start:a,end:i}:qt(`View index out of bounds`,`@moonbitlang/core/builtin:arrayview.mbt:200:5-200:38`)}function Un(e,t){le(e,t)}function Wn(e,t){le(e,t)}function Gn(e){return ue(e)}function Kn(e){return e.length===0?-1:Gn(e)}function qn(e){return ce(e)}function Jn(e){Un(e,0)}function Yn(e){Wn(e,0)}function Xn(e){return fe(e)?me:new he(e)}function Zn(){return ge()}function Qn(e,t){return g(e,`appendChild`,[t])}function $n(e,t){_(e,`textContent`,t)}function er(e){g(e,`preventDefault`,[])}function tr(e,t){_(e,`className`,t)}function nr(e,t,n){g(e,`setAttribute`,[t,n])}function rr(e,t){g(e,`removeAttribute`,[t])}function ir(e,t){return Xn(g(e,`getElementById`,[t]))}function ar(){let e=Ge.val;return Ge.val=e+1|0,e}function or(e){let t=E.current_owner;t!==void 0&&On(t.disposers,e)}function sr(e){let t=e.length-1|0;for(;;){let n=t;if(n>=0){en(e,n)(),t=n-1|0;continue}else break}Jn(e)}function cr(e){let t=E.current_cleanups;return E.current_cleanups=e,t}function lr(e,n){let r=cr(new t(e));n(),E.current_cleanups=r}function ur(e,t){let n=E.current_subscriber;E.current_subscriber=e,t(),E.current_subscriber=n}function dr(e){let t={active:!0,cleanups:[]},n=ar(),r={val:void 0},i=()=>{if(!t.active)return;sr(t.cleanups);let n=r.val;n!==void 0&&ur(n,()=>{lr(t.cleanups,e)})};r.val={id:n,run:i},i();let a=()=>{t.active=!1,sr(t.cleanups)};return or(a),a}function fr(e){let t=E.current_subscriber;if(t!==void 0){let n=t;zn(Rn(e.subscribers),e=>e.id===n.id)||L(e.subscribers,n)}return e.value}function pr(e){let t=E.current_subscriber;if(t!==void 0){let n=t;zn(Rn(e.subscribers),e=>e.id===n.id)||L(e.subscribers,n)}return e.value}function V(e){let t=E.current_subscriber;if(t!==void 0){let n=t;zn(Rn(e.subscribers),e=>e.id===n.id)||L(e.subscribers,n)}return e.value}function mr(e){return{value:e,subscribers:[]}}function hr(e){return{value:e,subscribers:[]}}function gr(e){return{value:e,subscribers:[]}}function _r(e){return mr(e)}function vr(e){return hr(e)}function yr(e){return gr(e)}function br(e){let t=E.pending_ids,n=t.length,r=0;for(;;){let i=r;if(i<n){if(t[i]===e)return!0;r=i+1|0;continue}else break}return!1}function xr(e){if(E.batch_depth>0){if(br(e.id))return;An(E.pending_ids,e.id),L(E.pending_effects,e);return}else{let t=e.run;t();return}}function Sr(e){let t=e.subscribers,n=t.length,r=0;for(;;){let e=r;if(e<n){let n=t[e];xr(n),r=e+1|0;continue}else return}}function Cr(e){let t=e.subscribers,n=t.length,r=0;for(;;){let e=r;if(e<n){let n=t[e];xr(n),r=e+1|0;continue}else return}}function wr(e){let t=e.subscribers,n=t.length,r=0;for(;;){let e=r;if(e<n){let n=t[e];xr(n),r=e+1|0;continue}else return}}function Tr(e,t){e.value=t,Sr(e)}function Er(e,t){e.value=t,Cr(e)}function Dr(e,t){e.value=t,wr(e)}function Or(e,t){e.value=t(e.value),wr(e)}function kr(e){let t=E.current_subscriber;E.current_subscriber=void 0;let n=e();return E.current_subscriber=t,n}function Ar(e){let t=E.current_subscriber;E.current_subscriber=void 0;let n=e();return E.current_subscriber=t,n}function jr(e){let t=ye(_e(),e());return dr(()=>{$n(t,e())}),new xe(t)}function Mr(e,t,n){if(t===`className`){tr(e,n);return}else if(t===`value`){_(e,`value`,n);return}else if(t===`checked`){_(e,`checked`,n===`true`);return}else if(t===`disabled`)if(n===`true`){nr(e,`disabled`,``);return}else{rr(e,`disabled`);return}else{nr(e,t,n);return}}function Nr(e,t){nr(e,`style`,t)}function Pr(e,t,n){switch(n.$tag){case 0:{let r=n._0;if(t===`style`){Nr(e,r);return}else{Mr(e,t,r);return}}case 1:{let r=n._0;dr(()=>{let n=r();if(t===`style`){Nr(e,n);return}else{Mr(e,t,n);return}});return}default:{let r=n._0;if(t===`__ref`){r(e);return}else{we(e,t,r);return}}}}function Fr(e){return{inner:e}}function Ir(e){switch(e.$tag){case 0:return e._0.inner;case 1:return e._0;case 2:return e._0;default:return e._0}}function H(e,t,n){let r=ve(_e(),e),i=t.length,a=0;for(;;){let e=a;if(e<i){let n=t[e],i=n._0,o=n._1;Pr(r,i,o),a=e+1|0;continue}else break}let o=n.length,s=0;for(;;){let e=s;if(e<o){let t=n[e];Qn(r,Ir(t)),s=e+1|0;continue}else break}return new be(Fr(r))}function Lr(e,t){Qn(e.inner,Ir(t))}function Rr(e){$n(e.inner,``)}function zr(e){return new xe(ye(_e(),e))}function Br(e){return g(e,`toString`,[])}function Vr(e,t){switch(e.$tag){case 0:{let n=e._0;t.method_table.method_0(t.self,n);return}case 1:{let n=e._0;t.method_table.method_0(t.self,Br(n));return}case 2:{let n=e._0;t.method_table.method_0(t.self,M(n,10));return}default:{let n=e._0;t.method_table.method_0(t.self,fn(n));return}}}function Hr(e){return new n(pn(e))}function U(){return pe()}function W(e,t,r,a,o,s,c){let l=[];if(e===void 0||R(l,{_0:`id`,_1:new n(e)}),t===void 0||R(l,{_0:`className`,_1:new n(t)}),r===void 0||R(l,{_0:`style`,_1:new n(r)}),a.$tag===1){let e=a._0,t=Te(e),n=t.length,r=0;for(;;){let e=r;if(e<n){let n=t[e];R(l,n),r=e+1|0;continue}else break}}if(o!==void 0){let e=o;R(l,{_0:`__ref`,_1:new i(t=>{e(t)})})}if(s.$tag===1){let e=s._0,t=e.length,n=0;for(;;){let r=n;if(r<t){let t=e[r];R(l,{_0:t._0,_1:Hr(t._1)}),n=r+1|0;continue}else break}}if(c.$tag===1){let e=c._0,t=e.length,n=0;for(;;){let r=n;if(r<t){let t=e[r];R(l,t),n=r+1|0;continue}else break}}return l}function Ur(e,t,n,i,a,o,s,c,l,u){let d=W(e,t,n,o,s,c,l);return i===void 0||R(d,{_0:`className`,_1:new r(i)}),a===void 0||R(d,{_0:`style`,_1:new r(a)}),H(`nav`,d,u)}function G(e,t,n,i,a,o,s,c,l,u){let d=W(e,t,n,o,s,c,l);return i===void 0||R(d,{_0:`className`,_1:new r(i)}),a===void 0||R(d,{_0:`style`,_1:new r(a)}),H(`div`,d,u)}function Wr(e,t,n,i,a,o,s,c,l,u){let d=W(e,t,n,o,s,c,l);return i===void 0||R(d,{_0:`className`,_1:new r(i)}),a===void 0||R(d,{_0:`style`,_1:new r(a)}),H(`span`,d,u)}function K(e,t,n,i,a,o,s,c,l,u){let d=W(e,t,n,o,s,c,l);return i===void 0||R(d,{_0:`className`,_1:new r(i)}),a===void 0||R(d,{_0:`style`,_1:new r(a)}),H(`p`,d,u)}function Gr(e,t,i,a,o,s,c,l,u,d,f,p){let m=W(i,a,o,l,u,d,f);return e===void 0||R(m,{_0:`href`,_1:new n(e)}),t===void 0||R(m,{_0:`target`,_1:new n(t)}),s===void 0||R(m,{_0:`className`,_1:new r(s)}),c===void 0||R(m,{_0:`style`,_1:new r(c)}),H(`a`,m,p)}function q(e,t,n,i,a,o,s,c,l,u){let d=W(e,t,n,o,s,c,l);return i===void 0||R(d,{_0:`className`,_1:new r(i)}),a===void 0||R(d,{_0:`style`,_1:new r(a)}),H(`h1`,d,u)}function Kr(e,t,n,i,a,o,s,c,l,u){let d=W(e,t,n,o,s,c,l);return i===void 0||R(d,{_0:`className`,_1:new r(i)}),a===void 0||R(d,{_0:`style`,_1:new r(a)}),H(`h2`,d,u)}function qr(e,t,n,i,a,o,s,c,l,u){let d=W(e,t,n,o,s,c,l);return i===void 0||R(d,{_0:`className`,_1:new r(i)}),a===void 0||R(d,{_0:`style`,_1:new r(a)}),H(`h3`,d,u)}function Jr(e,t,n,i,a,o,s,c,l,u){let d=W(e,t,n,o,s,c,l);return i===void 0||R(d,{_0:`className`,_1:new r(i)}),a===void 0||R(d,{_0:`style`,_1:new r(a)}),H(`ul`,d,u)}function J(e,t,n,i,a,o,s,c,l,u){let d=W(e,t,n,o,s,c,l);return i===void 0||R(d,{_0:`className`,_1:new r(i)}),a===void 0||R(d,{_0:`style`,_1:new r(a)}),H(`li`,d,u)}function Y(e,t,n,i,a,o,s,c,l,u,d,f){let p=W(t,n,i,c,l,u,d);if(e===-1||e===!0&&R(p,Ke),a===void 0||R(p,{_0:`className`,_1:new r(a)}),o===void 0||R(p,{_0:`style`,_1:new r(o)}),s!==void 0){let e=s;R(p,{_0:`disabled`,_1:new r(()=>fn(e()))})}return H(`button`,p,f)}function Yr(e,t,n,i,a,o,s,c,l){let u=W(e,t,n,o,s,c,l);return i===void 0||R(u,{_0:`className`,_1:new r(i)}),a===void 0||R(u,{_0:`style`,_1:new r(a)}),H(`hr`,u,[])}function X(e){return zr(e)}function Xr(e){return jr(e)}function Z(e,t){let n=[],r=Fn(e),i=[],a=r.length,o=0;for(;;){let e=o;if(e<a){let a=r[e];a===t?(z(n,P({buf:i,start:0,end:i.length})),Yn(i)):kn(i,a),o=e+1|0;continue}else break}return z(n,P({buf:i,start:0,end:i.length})),n}function Zr(e,t){let n=e.params,r=n.length,i=0;for(;;){let e=i;if(e<r){let r=n[e];if(r._0===t)return r._1;i=e+1|0;continue}else break}}function Qr(e){if(e!==``){let t=[],n=Z(e,38),r=n.length,i=0;for(;;){let e=i;if(e<r){let r=n[e],a=Z(r,61);if(a.length===2)B(t,{_0:O(a,0),_1:O(a,1)});else{let e;e=a.length===1?O(a,0)!==``:!1,e&&B(t,{_0:O(a,0),_1:``})}i=e+1|0;continue}else break}return t}else return[]}function $r(e){let t=Fn(e),n=-1,r=t.length,i=0;for(;;){let e=i;if(e<r){if(t[e]===63){n=e;break}i=e+1|0;continue}else break}return n===-1?{_0:e,_1:[]}:{_0:P(Hn(t,0,n)),_1:Qr(P(Hn(t,n+1|0,void 0)))}}function ei(e){return I(e,{str:qe,start:0,end:1})&&F(e,{str:Je,start:0,end:1})&&!I(e,{str:Ye,start:0,end:4})&&!I(e,{str:Xe,start:0,end:5})}function ti(e){if(e.length===0)return``;let t=D(0),n=e.length,r=0;for(;;){let i=r;if(i<n){let n=e[i];i>0&&un(t,`/`),un(t,n),r=i+1|0;continue}else break}return t.val}function ni(e){let t=Z(e,47),n=[],r=t.length,i=0;for(;;){let e=i;if(e<r){let r=t[e];r!==``&&z(n,r),i=e+1|0;continue}else break}return n}function ri(e,t){let n=Pn(t);return I(e,{str:n,start:0,end:n.length})}function ii(e,t){let n=ni(t.pattern),r=ni(e),i=t.catch_all;if(i===void 0){if(n.length!==r.length)return y;let e=[],i=0,a=n.length,o=0;for(;;){let s=o;if(s<a){let a=n[s],c=O(r,s);if(ri(a,58)||ei(a))if(i<t.param_names.length)B(e,{_0:O(t.param_names,i),_1:c}),i=i+1|0;else return y;else if(a!==c)return y;o=s+1|0;continue}else break}return new Ee(e)}else{let e=i,a=n.length-1|0,o=r.length;if(e.optional){if(o<a)return y}else if(o<=a)return y;let s=[],c=0,l=0;for(;;){let e=l;if(e<a){let i=O(n,e),a=O(r,e);if(ri(i,58)||ei(i))if(c<t.param_names.length)B(s,{_0:O(t.param_names,c),_1:a}),c=c+1|0;else return y;else if(i!==a)return y;l=e+1|0;continue}else break}let u=[],d=a;for(;;){let e=d;if(e<o){z(u,O(r,e)),d=e+1|0;continue}else break}let f=ti(u);return B(s,{_0:e.name,_1:f}),new Ee(s)}}function ai(e,t){let n=$r(e),r=n._0,i=n._1,a=t.length,o=0;for(;;){let e=o;if(e<a){let n=t[e],a=ii(r,n);if(a.$tag===1)return{route:n,params:a._0,query:i,path:r};o=e+1|0;continue}else break}}function oi(e){if(e===``||e===`/`)return`/`;let t=Fn(e),n=[],r=!1,i=t.length,a=0;for(;;){let e=a;if(e<i){let i=t[e];i===47?(r||kn(n,i),r=!0):(kn(n,i),r=!1),a=e+1|0;continue}else break}let o=n.length;return o>1&&tn(n,o-1|0)===47&&Kn(n),P({buf:n,start:0,end:n.length})}function si(e){let t=[],n=Z(e,47),r=n.length,i=0;for(;;){let e=i;if(e<r){_L:{let r=n[e];if(I(r,{str:Ze,start:0,end:1})&&r.length>1){let e;_L$2:{_L$3:{let t=j(r,1,void 0),n;if(t.$tag===1)n=t._0;else{t._0;break _L$3}e=N(n);break _L$2}break _L}z(t,e)}else if(I(r,{str:Qe,start:0,end:1})&&!I(r,{str:$e,start:0,end:4})&&!I(r,{str:et,start:0,end:5})&&F(r,{str:tt,start:0,end:1})&&r.length>2){let e;_L$2:{_L$3:{let t=j(r,1,r.length-1|0),n;if(t.$tag===1)n=t._0;else{t._0;break _L$3}e=N(n);break _L$2}break _L}z(t,e)}break _L}i=e+1|0;continue}else break}return t}function ci(e){let t=Z(e,47);if(t.length===0)return;let n=O(t,t.length-1|0);if(I(n,{str:nt,start:0,end:5})&&F(n,{str:rt,start:0,end:2})&&n.length>7){let e;_L:{_L$2:{let t=j(n,5,n.length-2|0),r;if(t.$tag===1)r=t._0;else{t._0;break _L$2}e=N(r);break _L}return}return{name:e,optional:!0}}if(I(n,{str:it,start:0,end:4})&&F(n,{str:at,start:0,end:1})&&n.length>5){let e;_L:{_L$2:{let t=j(n,4,n.length-1|0),r;if(t.$tag===1)r=t._0;else{t._0;break _L$2}e=N(r);break _L}return}return{name:e,optional:!1}}}function li(e,t,n,r){let i=e.length,a=0;for(;;){let o=a;if(o<i){let i=e[o];switch(i.$tag){case 0:{let e=i,a=e._0,o=e._1,s=e._2,c=e._3,l=oi(`${t}${a}`),u=si(l),d=ci(l);Dn(r,{pattern:l,param_names:u,component:o,layouts:qn(n),kind:0,title:s,meta:c,catch_all:d});break}case 2:{let e=i,n=e._0,a=e._1,o=oi(`${t}${n}`);Dn(r,{pattern:o,param_names:si(o),component:a,layouts:[],kind:1,title:``,meta:[],catch_all:ci(o)});break}case 3:{let e=i,n=e._0,a=e._1,o=oi(`${t}${n}`);Dn(r,{pattern:o,param_names:si(o),component:a,layouts:[],kind:2,title:``,meta:[],catch_all:ci(o)});break}default:{let e=i,a=e._0,o=e._1,s=e._2,c=oi(`${t}${a}`),l=qn(n);z(l,s),li(o,c,l,r)}}a=o+1|0;continue}else return}}function ui(e,t){let n=[];return li(e,t,[],n),n}function di(){let e=De(),t=Oe();return t===``?e:`${e}${t}`}function fi(e){let t=di();Tr(e.current_path,t),Er(e.current_match,ai(t,e.routes))}function pi(e,t){let n=ui(e,t),r=di(),i=ai(r,n),a={routes:n,base:t,current_path:_r(r),current_match:vr(i)};return Ae(()=>{fi(a)}),a}function mi(e,t){Tr(e.current_path,t),Er(e.current_match,ai(t,e.routes))}function Q(e,t){ke(t),mi(e,t)}function hi(e){return fr(e.current_path)}function $(e){g(de(Zn(),`console`),`log`,[e])}function gi(){return[new b(``,`home`,`Home`,[]),new b(`/about`,`about`,`About`,[]),new je(`/users`,[new b(``,`users_list`,`Users`,[]),new b(`/:id`,`user_detail`,`User Detail`,[])],`users_layout`),new je(`/settings`,[new b(``,`settings_index`,`Settings`,[]),new b(`/profile`,`settings_profile`,`Profile Settings`,[])],`settings_layout`)]}function _i(e,t,n){return Gr(t,void 0,void 0,void 0,void 0,void 0,void 0,new S(v(U(),n=>{er(n),Q(e,t)})),void 0,C,T,[X(n)])}function vi(e){let t=e.base;return Ur(void 0,void 0,st,void 0,void 0,x,void 0,C,T,[Wr(void 0,void 0,ct,void 0,void 0,x,void 0,C,T,[_i(e,t,`Home`)]),Wr(void 0,void 0,lt,void 0,void 0,x,void 0,C,T,[_i(e,`${t}/about`,`About`)]),Wr(void 0,void 0,ut,void 0,void 0,x,void 0,C,T,[_i(e,`${t}/users`,`Users`)]),Wr(void 0,void 0,dt,void 0,void 0,x,void 0,C,T,[_i(e,`${t}/settings`,`Settings`)])])}function yi(){let e=yr(0);return $(`Creating counter component, initial count: ${M(V(e),10)}`),G(void 0,ft,void 0,void 0,void 0,x,void 0,new w([pt]),T,[qr(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`Interactive Counter`)]),K(void 0,void 0,void 0,void 0,void 0,x,void 0,new w([mt]),T,[Xr(()=>`Count: ${M(V(e),10)}`)]),G(void 0,ht,void 0,void 0,void 0,x,void 0,C,T,[Y(-1,void 0,void 0,void 0,void 0,void 0,void 0,new S(v(U(),t=>{$(`Decrement clicked, current: ${M(V(e),10)}`),Or(e,e=>e-1|0),$(`After decrement: ${M(V(e),10)}`)})),void 0,new w([gt]),T,[X(`-`)]),Y(-1,void 0,void 0,void 0,void 0,void 0,void 0,new S(v(U(),t=>{$(`Increment clicked, current: ${M(V(e),10)}`),Or(e,e=>e+1|0),$(`After increment: ${M(V(e),10)}`)})),void 0,new w([_t]),T,[X(`+`)]),Y(-1,void 0,void 0,void 0,void 0,void 0,void 0,new S(v(U(),t=>{$(`Reset clicked`),Dr(e,0)})),void 0,new w([vt]),T,[X(`Reset`)])])])}function bi(e){return G(void 0,yt,void 0,void 0,void 0,x,void 0,new w([bt]),T,[q(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`Welcome to Browser App`)]),K(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`This is an example of the new Routes-based routing system.`)]),yi(),Yr(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T),Kr(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`Features`)]),Jr(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[J(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`Routes enum for declarative route definitions`)]),J(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`Component ID-based resolution`)]),J(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`Layout support for nested routes`)]),J(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`Dynamic parameters with :id syntax`)]),J(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`URLPattern API for matching`)])]),K(void 0,void 0,void 0,void 0,void 0,x,void 0,new w([xt]),T,[X(`Current path: `),Xr(()=>hi(e))])])}function xi(e){return G(void 0,St,void 0,void 0,void 0,x,void 0,new w([Ct]),T,[q(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`About`)]),K(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`This app demonstrates the new routing architecture:`)]),Jr(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[J(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`ServerComponent: async data fetching on server`)]),J(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`ClientComponent (Island): Hydration with luna:url`)]),J(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`Layout: shared wrapper for nested routes`)])])])}function Si(e,t){let n=e.base;return G(void 0,wt,Tt,void 0,void 0,x,void 0,C,T,[G(void 0,void 0,Et,void 0,void 0,x,void 0,C,T,[Kr(void 0,void 0,Dt,void 0,void 0,x,void 0,C,T,[X(`Users Section`)]),K(void 0,void 0,Ot,void 0,void 0,x,void 0,C,T,[X(`This is a layout wrapper for all /users/* routes`)])]),G(void 0,void 0,kt,void 0,void 0,x,void 0,C,T,[Y(-1,void 0,void 0,At,void 0,void 0,void 0,new S(v(U(),t=>{Q(e,`${n}/users`)})),void 0,C,T,[X(`User List`)]),Y(-1,void 0,void 0,jt,void 0,void 0,void 0,new S(v(U(),t=>{Q(e,`${n}/users/1`)})),void 0,C,T,[X(`User 1`)]),Y(-1,void 0,void 0,Mt,void 0,void 0,void 0,new S(v(U(),t=>{Q(e,`${n}/users/2`)})),void 0,C,T,[X(`User 2`)]),Y(-1,void 0,void 0,void 0,void 0,void 0,void 0,new S(v(U(),t=>{Q(e,`${n}/users/3`)})),void 0,C,T,[X(`User 3`)])]),t])}function Ci(e){return G(void 0,Nt,void 0,void 0,void 0,x,void 0,C,T,[qr(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`User List`)]),Jr(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[J(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`User 1 - Alice`)]),J(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`User 2 - Bob`)]),J(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`User 3 - Charlie`)])])])}function wi(e,t){let n=Zr(t,`id`),r;r=n===void 0?`unknown`:n;let i;switch(r){case`1`:i=`Alice`;break;case`2`:i=`Bob`;break;case`3`:i=`Charlie`;break;default:i=`Unknown User`}return G(void 0,Pt,void 0,void 0,void 0,x,void 0,C,T,[qr(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`User Detail`)]),K(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`User ID: ${r}`)]),K(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`Name: ${i}`)]),K(void 0,void 0,Ft,void 0,void 0,x,void 0,C,T,[X(`(In a real app, this data would be fetched from an API)`)])])}function Ti(e){let t=`${e.base}/settings/profile`;return G(void 0,It,void 0,void 0,void 0,x,void 0,C,T,[q(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`Settings`)]),Jr(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[J(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[Gr(t,void 0,void 0,void 0,void 0,void 0,void 0,new S(v(U(),n=>{er(n),Q(e,t)})),void 0,C,T,[X(`Profile Settings`)])])])])}function Ei(e){let t=e.base;return G(void 0,Lt,void 0,void 0,void 0,x,void 0,C,T,[q(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`Profile Settings`)]),K(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`Edit your profile here.`)]),Y(-1,void 0,void 0,void 0,void 0,void 0,void 0,new S(v(U(),n=>{Q(e,`${t}/settings`)})),void 0,C,T,[X(`Back to Settings`)])])}function Di(e){let t=e.base;return G(void 0,Rt,void 0,void 0,void 0,x,void 0,C,T,[q(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`404 - Not Found`)]),K(void 0,void 0,void 0,void 0,void 0,x,void 0,C,T,[X(`Page not found: `),Xr(()=>hi(e))]),Y(-1,void 0,void 0,void 0,void 0,void 0,void 0,new S(v(U(),n=>{Q(e,t)})),void 0,C,T,[X(`Go Home`)])])}function Oi(e,t){let n=t.route.component,r=t.route.layouts;$(`Resolving component: ${n}, layouts: ${M(r.length,10)}`);let i;switch(n){case`home`:i=bi(e);break;case`about`:i=xi(e);break;case`users_list`:i=Ci(e);break;case`user_detail`:i=wi(e,t);break;case`settings_index`:i=Ti(e);break;case`settings_profile`:i=Ei(e);break;default:i=Di(e)}let a=i,o=r.length-1|0;for(;o>=0;){let t=O(r,o),n;n=t===`users_layout`?Si(e,a):a,a=n,o=o-1|0}return a}function ki(e,t){dr(()=>{let n=pr(e.current_match),r=e.current_path.value;$(`Route changed (effect triggered): ${r}`),Rr(t);let i=kr(()=>{let t=vi(e),r;return r=n===void 0?Di(e):Oi(e,n),{_0:t,_1:r}}),a=i._0,o=i._1;Lr(t,Ar(()=>G(void 0,zt,Bt,void 0,void 0,x,void 0,C,T,[a,G(void 0,void 0,Vt,void 0,void 0,x,void 0,C,T,[o])])))})}(()=>{$(`Browser App Starting...`);let e=ir(_e(),`app`);if(e.$tag===1){let t=e._0,n=pi(gi(),ot),r=n.routes,i=r.length,a=0;for(;;){let e=a;if(e<i){let t=r[e];$(`Compiled route: pattern=${t.pattern}, component=${t.component}`),a=e+1|0;continue}else break}$(`Router created with path: ${hi(n)}`),ki(n,Fr(t)),$(`App rendered!`);return}else{$(`ERROR: #app container not found`);return}})();