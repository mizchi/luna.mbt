import"./modulepreload-polyfill-BxR_cmXS.js";var e={$tag:0};function t(e){this._0=e}t.prototype.$tag=1;function n(e){this._0=e}n.prototype.$tag=0;function r(e){this._0=e}r.prototype.$tag=1;function i(e){this._0=e}i.prototype.$tag=2;function a(e){this._0=e}a.prototype.$tag=0;function o(e){this._0=e}o.prototype.$tag=1;function s(e){this._0=e}s.prototype.$tag=2;function c(e){this._0=e}c.prototype.$tag=3;var l=class extends Error{};function u(){throw new l}function d(e,t){if(t<0||t>=e.length)throw Error(`Index out of bounds`)}function f(e,t){let n=Array(e);return n.fill(t),n}function p(e){this._0=e}p.prototype.$tag=0;function m(e){this._0=e}m.prototype.$tag=1;var ee={$tag:1},te={$tag:0},ne=(e,t)=>e.toString(t),h=(e,t)=>{e.push(t)},re={$tag:0};function ie(e){this._0=e}ie.prototype.$tag=1;function ae(e){this._0=e}ae.prototype.$tag=2;function oe(e){this._0=e}oe.prototype.$tag=3;function se(e){this._0=e}se.prototype.$tag=4;var ce=e=>e.slice(0),le=(e,t)=>{e.length=t},ue=e=>e.pop(),de=(e,t)=>e[t],g=(e,t,n)=>e[t](...n),fe=e=>e==null,pe=()=>({}),me=(e,t,n)=>{e[t]=n},he={$tag:0};function ge(e){this._0=e}ge.prototype.$tag=1;var _e=()=>globalThis,ve=()=>document,ye=(e,t)=>e.createElement(t),be=(e,t)=>e.createTextNode(t),_={$tag:0};function xe(e){this._0=e}xe.prototype.$tag=1;function Se(e){this._0=e}Se.prototype.$tag=0;function Ce(e){this._0=e}Ce.prototype.$tag=1;function we(e){this._0=e}we.prototype.$tag=2;var Te=(e,t,n)=>e.addEventListener(t,n),v=(e,t)=>(e.click=t,e),Ee=e=>Object.entries(e).map(([e,t])=>({_0:e,_1:{$tag:2,_0:t}})),De=()=>window.location.pathname,Oe=()=>window.location.search,ke=e=>window.history.pushState(null,``,e),Ae=e=>window.addEventListener(`popstate`,()=>e());function y(e,t,n,r){this._0=e,this._1=t,this._2=n,this._3=r}y.prototype.$tag=0;function je(e,t,n){this._0=e,this._1=t,this._2=n}je.prototype.$tag=1;function Me(e,t){this._0=e,this._1=t}Me.prototype.$tag=2;function Ne(e,t){this._0=e,this._1=t}Ne.prototype.$tag=3;var b={$tag:0};function x(e){this._0=e}x.prototype.$tag=1;var S={$tag:0};function C(e){this._0=e}C.prototype.$tag=1;var w={$tag:0};function Pe(e){this._0=e}Pe.prototype.$tag=1;var Fe={method_0:ln,method_1:un,method_2:Sn,method_3:Zt},Ie=`:`,Le=`:`,Re=`-`,ze=`:`,Be=`:`,Ve=`/`,He=`/`,Ue=0,We=0,Ge=`[`,Ke=`]`,qe=`[...`,Je=`[[...`,Ye=`:`,Xe=`[`,Ze=`[...`,Qe=`[[...`,$e=`]`,et=`[[...`,tt=`]]`,nt=`[...`,rt=`]`,it={val:0},T={current_subscriber:void 0,current_owner:void 0,current_cleanups:e,batch_depth:0,pending_effects:[],pending_ids:[]},at={_0:`disabled`,_1:new n(`true`)},ot=`/demo/browser_router`,st=`background: #333; padding: 10px;`,ct=`color: white; margin-right: 20px;`,lt=`color: white; margin-right: 20px;`,ut=`color: white; margin-right: 20px;`,dt=`color: white; margin-right: 20px;`,ft=`counter`,pt={_0:`data-testid`,_1:new a(`counter`)},mt={_0:`data-testid`,_1:new a(`count-display`)},ht=`counter-buttons`,gt={_0:`data-testid`,_1:new a(`decrement-btn`)},_t={_0:`data-testid`,_1:new a(`increment-btn`)},vt={_0:`data-testid`,_1:new a(`reset-btn`)},yt=`page home`,bt={_0:`data-page`,_1:new a(`home`)},xt={_0:`data-testid`,_1:new a(`current-path`)},St=`page about`,Ct={_0:`data-page`,_1:new a(`about`)},wt=`users-layout`,Tt=`border: 2px solid #007bff; padding: 15px; margin: 10px 0;`,Et=`background: #007bff; color: white; padding: 10px; margin: -15px -15px 15px -15px;`,Dt=`margin: 0;`,Ot=`margin: 5px 0 0 0; font-size: 0.9em;`,kt=`margin-bottom: 10px;`,At=`margin-right: 10px;`,jt=`margin-right: 10px;`,Mt=`margin-right: 10px;`,Nt=`users-list`,Pt=`user-detail`,Ft=`color: #666; font-style: italic;`,It=`settings-index`,Lt=`settings-profile`,Rt=`not-found`,zt=`app`,Bt=`font-family: system-ui, sans-serif; max-width: 800px; margin: 0 auto;`,Vt=`padding: 20px;`;function Ht(e){return u()}function Ut(e){return u()}function Wt(e){u()}function Gt(e){return u()}function Kt(e,t){return e===0?t===0:t===1}function qt(e,t){return Ht(`${e}\n  at ${pn(t)}\n`)}function Jt(e,t){return Ut(`${e}\n  at ${pn(t)}\n`)}function Yt(e,t){Wt(`${e}\n  at ${pn(t)}\n`)}function Xt(e,t){return Gt(`${e}\n  at ${pn(t)}\n`)}function E(e){return{val:``}}function Zt(e,t){let n=e;n.val=`${n.val}${String.fromCodePoint(t)}`}function Qt(e,t){return(((Math.imul(e-55296|0,1024)|0)+t|0)-56320|0)+65536|0}function $t(e,t){return!Kt(e,t)}function D(e,t){let n=e.length;return t>=0&&t<n?(d(e,t),e[t]):u()}function en(e,t){let n=e.length;return t>=0&&t<n?(d(e,t),e[t]):u()}function tn(e,t){let n=e.length;return t>=0&&t<n?(d(e,t),e[t]):u()}function nn(e,t){let n=e.end-e.start|0,r=t.end-t.start|0;if(r>0)if(n>=r){let i=f(256,r),a=r-1|0,o=0;for(;;){let e=o;if(e<a){let n=t.str,a=t.start+e|0,s=n.charCodeAt(a)&255;d(i,s),i[s]=(r-1|0)-e|0,o=e+1|0;continue}else break}let s=0;for(;;){let a=s;if(a<=(n-r|0)){let n=r-1|0,o=0;for(;;){let r=o;if(r<=n){let n=a+r|0,i=e.str,s=e.start+n|0,c=i.charCodeAt(s),l=t.str,u=t.start+r|0;if(c!==l.charCodeAt(u))break;o=r+1|0;continue}else return a}let c=(a+r|0)-1|0,l=e.str,u=e.start+c|0,f=l.charCodeAt(u)&255;d(i,f),s=a+i[f]|0;continue}else break}return}else return;else return Ue}function rn(e,t){let n=e.end-e.start|0,r=t.end-t.start|0;if(r>0)if(n>=r){let i=t.str,a=t.start+0|0,o=i.charCodeAt(a),s=n-r|0,c=0;for(;c<=s;){for(;;){let t;if(c<=s){let n=c,r=e.str,i=e.start+n|0;t=r.charCodeAt(i)!==o}else t=!1;if(t){c=c+1|0;continue}else break}if(c<=s){let n=1;for(;;){let i=n;if(i<r){let r=c+i|0,a=e.str,o=e.start+r|0,s=a.charCodeAt(o),l=t.str,u=t.start+i|0;if(s!==l.charCodeAt(u))break;n=i+1|0;continue}else return c}c=c+1|0}}return}else return;else return We}function O(e,t){return(t.end-t.start|0)<=4?rn(e,t):nn(e,t)}function an(e,t){let n=e.end-e.start|0,r=t.end-t.start|0;if(r>0)if(n>=r){let i=f(256,r),a=r-1|0;for(;;){let e=a;if(e>0){let n=t.str,r=t.start+e|0,o=n.charCodeAt(r)&255;d(i,o),i[o]=e,a=e-1|0;continue}else break}let o=n-r|0;for(;;){let n=o;if(n>=0){let a=0;for(;;){let i=a;if(i<r){let r=n+i|0,o=e.str,s=e.start+r|0,c=o.charCodeAt(s),l=t.str,u=t.start+i|0;if(c!==l.charCodeAt(u))break;a=i+1|0;continue}else return n}let s=e.str,c=e.start+n|0,l=s.charCodeAt(c)&255;d(i,l),o=n-i[l]|0;continue}else break}return}else return;else return n}function on(e,t){let n=e.end-e.start|0,r=t.end-t.start|0;if(r>0)if(n>=r){let i=t.str,a=t.start+0|0,o=i.charCodeAt(a),s=n-r|0;for(;s>=0;){for(;;){let t;if(s>=0){let n=s,r=e.str,i=e.start+n|0;t=r.charCodeAt(i)!==o}else t=!1;if(t){s=s-1|0;continue}else break}if(s>=0){let n=1;for(;;){let i=n;if(i<r){let r=s+i|0,a=e.str,o=e.start+r|0,c=a.charCodeAt(o),l=t.str,u=t.start+i|0;if(c!==l.charCodeAt(u))break;n=i+1|0;continue}else return s}s=s-1|0}}return}else return;else return n}function k(e,t){return(t.end-t.start|0)<=4?on(e,t):an(e,t)}function A(e,t,n){let r;return r=n===void 0?e.end-e.start|0:n,t>=0&&t<=r&&r<=(e.end-e.start|0)?{str:e.str,start:e.start+t|0,end:e.start+r|0}:Jt(`Invalid index for View`,`@moonbitlang/core/builtin:stringview.mbt:111:5-111:36`)}function sn(e){let t=O(e,{str:Ie,start:0,end:1});if(t!==void 0){let n=t;return n>0&&(n+1|0)<(e.end-e.start|0)?{_0:A(e,0,n),_1:A(e,n+1|0,void 0)}:void 0}}function cn(e){_L:if(vn(e,1,0,e.length))if(e.charCodeAt(0)===64){let t=xn(e,1,0,e.length),n;n=t===void 0?e.length:t;let r={str:e,start:n,end:e.length},i=O(r,{str:Le,start:0,end:1});if(i===void 0)return u();{let e=i,t=A(r,0,e),n=k(r,{str:Re,start:0,end:1});if(n===void 0)return u();{let i=n;if((i+1|0)<(r.end-r.start|0)){let n=sn(A(r,i+1|0,void 0));if(n===void 0)return u();{let a=n,o=a._0,s=a._1,c=A(r,0,i);_L$2:{let n=k(c,{str:ze,start:0,end:1});if(n===void 0)break _L$2;{let r=k(A(c,0,n),{str:Be,start:0,end:1});if(r===void 0)break _L$2;{let n=r;if((n+1|0)<(c.end-c.start|0)){let r=sn(A(c,n+1|0,void 0));if(r===void 0)return u();{let i=r,a=i._0,l=i._1;return n>(e+1|0)?{pkg:t,filename:A(c,e+1|0,n),start_line:a,start_column:l,end_line:o,end_column:s}:u()}}else return u()}}}return u()}}else return u()}}}else break _L;else break _L;return u()}function ln(e,t){let n=e;n.val=`${n.val}${t}`}function j(e,t,n){let r=e.length,i;if(n===void 0)i=r;else{let e=n;i=e<0?r+e|0:e}let a=t<0?r+t|0:t;if(a>=0&&a<=i&&i<=r){let t;if(a<r){let n=e.charCodeAt(a);t=56320<=n&&n<=57343}else t=!1;if(t)return new p(te);let n;if(i<r){let t=e.charCodeAt(i);n=56320<=t&&t<=57343}else n=!1;return n?new p(te):new m({str:e,start:a,end:i})}else return new p(ee)}function un(e,t,n,r){let i;_L:{_L$2:{let e=j(t,n,n+r|0);if(e.$tag===1)i=e._0;else{e._0;break _L$2}break _L}i=u()}Sn(e,i)}function dn(e){let t=E(0),n={self:t,method_table:Fe};return e?n.method_table.method_0(n.self,`true`):n.method_table.method_0(n.self,`false`),t.val}function fn(e){let t=E(0);return ti(e,{self:t,method_table:Fe}),t.val}function pn(e){let t=E(0);return Vn(e,{self:t,method_table:Fe}),t.val}function M(e,t){return ne(e,t)}function N(e){return e.str.substring(e.start,e.end)}function mn(e){return e()}function hn(e){return e()}function gn(e){return t=>{for(;;){let n=mn(e);if(n===void 0)return 1;if(t(n)!==1)return 0}}}function _n(e){return t=>{for(;;){let n=hn(e);if(n===-1)return 1;if(t(n)!==1)return 0}}}function P(e){let t=E(Math.imul(e.end-e.start|0,4)|0),n=e.end-e.start|0,r=0;for(;;){let i=r;if(i<n){let n=e.buf[e.start+i|0];Zt(t,n),r=i+1|0;continue}else break}return t.val}function vn(e,t,n,r){let i;i=r===void 0?e.length:r;let a=n,o=0;for(;;){let n=a,r=o;if(n<i&&r<t){let t=e.charCodeAt(n);if(55296<=t&&t<=56319&&(n+1|0)<i){let t=n+1|0,i=e.charCodeAt(t);if(56320<=i&&i<=57343){a=n+2|0,o=r+1|0;continue}else Yt(`invalid surrogate pair`,`@moonbitlang/core/builtin:string.mbt:491:9-491:40`)}a=n+1|0,o=r+1|0;continue}else return r>=t}}function yn(e,t,n,r){let i=0,a=r;for(;(a-1|0)>=n&&i<t;){let t=a-1|0,n=e.charCodeAt(t);a=56320<=n&&n<=57343?a-2|0:a-1|0,i=i+1|0}return i<t||a<n?void 0:a}function bn(e,t,n,r){if(n>=0&&n<=r){let i=n,a=0;for(;i<r&&a<t;){let t=i,n=e.charCodeAt(t);i=55296<=n&&n<=56319?i+2|0:i+1|0,a=a+1|0}return a<t||i>=r?void 0:i}else return Xt(`Invalid start index`,`@moonbitlang/core/builtin:string.mbt:366:5-366:33`)}function xn(e,t,n,r){let i;return i=r===void 0?e.length:r,t>=0?bn(e,t,n,i):yn(e,-t|0,n,i)}function Sn(e,t){let n=e;n.val=`${n.val}${N(t)}`}function Cn(e,t){let n=k(e,t);return n===void 0?!1:n===((e.end-e.start|0)-(t.end-t.start|0)|0)}function wn(e,t){return Cn({str:e,start:0,end:e.length},t)}function Tn(e,t){let n=O(e,t);return n===void 0?!1:n===0}function F(e,t){return Tn({str:e,start:0,end:e.length},t)}function En(e){return[]}function Dn(e,t){h(e,t)}function I(e,t){h(e,t)}function On(e,t){h(e,t)}function L(e,t){h(e,t)}function R(e,t){h(e,t)}function kn(e,t){h(e,t)}function z(e,t){h(e,t)}function An(e,t){h(e,t)}function jn(e){let t=e.length,n={val:0};return()=>{if(n.val<t){let r=n.val,i=e.charCodeAt(r);if(55296<=i&&i<=56319&&(n.val+1|0)<t){let t=n.val+1|0,r=e.charCodeAt(t);if(56320<=r&&r<=57343){let e=Qt(i,r);return n.val=n.val+2|0,e}}return n.val=n.val+1|0,i}else return-1}}function Mn(e){return _n(jn(e))}function Nn(e,t){return e(t)}function Pn(e){return String.fromCodePoint(e)}function Fn(e){let t=Mn(e),n={val:En(e.length)},r={val:re};t(e=>{let t=n.val;return z(t,e),n.val=t,1});let i=r.val;switch(i.$tag){case 0:break;case 1:i._0;break;case 2:return i._0;case 3:u();break;default:u()}return n.val}function In(e){let t={val:0};return()=>{if(t.val<(e.end-e.start|0)){let n=e.buf[e.start+t.val|0];return t.val=t.val+1|0,n}else return}}function Ln(e){return In({buf:e,start:0,end:e.length})}function Rn(e){return gn(Ln(e))}function zn(e,t){return $t(Nn(e,e=>t(e)?0:1),1)}function Bn(e,t){let n=e.pkg,r=O(n,{str:Ve,start:0,end:1}),i;if(r===void 0)i={_0:n,_1:void 0};else{let e=r,t=O(A(n,e+1|0,void 0),{str:He,start:0,end:1});if(t===void 0)i={_0:n,_1:void 0};else{let r=t,a=(e+1|0)+r|0;i={_0:A(n,0,a),_1:A(n,a+1|0,void 0)}}}let a=i._0,o=i._1;if(o!==void 0){let e=o;t.method_table.method_2(t.self,e),t.method_table.method_3(t.self,47)}t.method_table.method_2(t.self,e.filename),t.method_table.method_3(t.self,58),t.method_table.method_2(t.self,e.start_line),t.method_table.method_3(t.self,58),t.method_table.method_2(t.self,e.start_column),t.method_table.method_3(t.self,45),t.method_table.method_2(t.self,e.end_line),t.method_table.method_3(t.self,58),t.method_table.method_2(t.self,e.end_column),t.method_table.method_3(t.self,64),t.method_table.method_2(t.self,a)}function Vn(e,t){Bn(cn(e),t)}function Hn(e,t,n){let r=e.length,i;if(n===void 0)i=r;else{let e=n;i=e<0?r+e|0:e}let a=t<0?r+t|0:t;return a>=0&&a<=i&&i<=r?{buf:e,start:a,end:i}:qt(`View index out of bounds`,`@moonbitlang/core/builtin:arrayview.mbt:200:5-200:38`)}function Un(e,t){le(e,t)}function Wn(e,t){le(e,t)}function Gn(e){return ue(e)}function Kn(e){return e.length===0?-1:Gn(e)}function qn(e){return ce(e)}function Jn(e){Un(e,0)}function Yn(e){Wn(e,0)}function Xn(e){return fe(e)?he:new ge(e)}function Zn(){return _e()}function Qn(e,t){return g(e,`appendChild`,[t])}function $n(e,t){me(e,`textContent`,t)}function er(e){g(e,`preventDefault`,[])}function tr(e,t){me(e,`className`,t)}function nr(e,t,n){g(e,`setAttribute`,[t,n])}function rr(e,t){g(e,`removeAttribute`,[t])}function ir(e,t){return Xn(g(e,`getElementById`,[t]))}function B(e,t){let n=[],r=Fn(e),i=[],a=r.length,o=0;for(;;){let e=o;if(e<a){let a=r[e];a===t?(L(n,P({buf:i,start:0,end:i.length})),Yn(i)):z(i,a),o=e+1|0;continue}else break}return L(n,P({buf:i,start:0,end:i.length})),n}function ar(e,t){let n=e.params,r=n.length,i=0;for(;;){let e=i;if(e<r){let r=n[e];if(r._0===t)return r._1;i=e+1|0;continue}else break}}function or(e){if(e!==``){let t=[],n=B(e,38),r=n.length,i=0;for(;;){let e=i;if(e<r){let r=n[e],a=B(r,61);if(a.length===2)R(t,{_0:D(a,0),_1:D(a,1)});else{let e;e=a.length===1?D(a,0)!==``:!1,e&&R(t,{_0:D(a,0),_1:``})}i=e+1|0;continue}else break}return t}else return[]}function sr(e){let t=Fn(e),n=-1,r=t.length,i=0;for(;;){let e=i;if(e<r){if(t[e]===63){n=e;break}i=e+1|0;continue}else break}return n===-1?{_0:e,_1:[]}:{_0:P(Hn(t,0,n)),_1:or(P(Hn(t,n+1|0,void 0)))}}function cr(e){return F(e,{str:Ge,start:0,end:1})&&wn(e,{str:Ke,start:0,end:1})&&!F(e,{str:qe,start:0,end:4})&&!F(e,{str:Je,start:0,end:5})}function lr(e){if(e.length===0)return``;let t=E(0),n=e.length,r=0;for(;;){let i=r;if(i<n){let n=e[i];i>0&&ln(t,`/`),ln(t,n),r=i+1|0;continue}else break}return t.val}function ur(e){let t=B(e,47),n=[],r=t.length,i=0;for(;;){let e=i;if(e<r){let r=t[e];r!==``&&L(n,r),i=e+1|0;continue}else break}return n}function dr(e,t){let n=Pn(t);return F(e,{str:n,start:0,end:n.length})}function fr(e,t){let n=ur(t.pattern),r=ur(e),i=t.catch_all;if(i===void 0){if(n.length!==r.length)return _;let e=[],i=0,a=n.length,o=0;for(;;){let s=o;if(s<a){let a=n[s],c=D(r,s);if(dr(a,58)||cr(a))if(i<t.param_names.length)R(e,{_0:D(t.param_names,i),_1:c}),i=i+1|0;else return _;else if(a!==c)return _;o=s+1|0;continue}else break}return new xe(e)}else{let e=i,a=n.length-1|0,o=r.length;if(e.optional){if(o<a)return _}else if(o<=a)return _;let s=[],c=0,l=0;for(;;){let e=l;if(e<a){let i=D(n,e),a=D(r,e);if(dr(i,58)||cr(i))if(c<t.param_names.length)R(s,{_0:D(t.param_names,c),_1:a}),c=c+1|0;else return _;else if(i!==a)return _;l=e+1|0;continue}else break}let u=[],d=a;for(;;){let e=d;if(e<o){L(u,D(r,e)),d=e+1|0;continue}else break}let f=lr(u);return R(s,{_0:e.name,_1:f}),new xe(s)}}function pr(e,t){let n=sr(e),r=n._0,i=n._1,a=t.length,o=0;for(;;){let e=o;if(e<a){let n=t[e],a=fr(r,n);if(a.$tag===1)return{route:n,params:a._0,query:i,path:r};o=e+1|0;continue}else break}}function mr(e){if(e===``||e===`/`)return`/`;let t=Fn(e),n=[],r=!1,i=t.length,a=0;for(;;){let e=a;if(e<i){let i=t[e];i===47?(r||z(n,i),r=!0):(z(n,i),r=!1),a=e+1|0;continue}else break}let o=n.length;return o>1&&tn(n,o-1|0)===47&&Kn(n),P({buf:n,start:0,end:n.length})}function hr(e){let t=[],n=B(e,47),r=n.length,i=0;for(;;){let e=i;if(e<r){_L:{let r=n[e];if(F(r,{str:Ye,start:0,end:1})&&r.length>1){let e;_L$2:{_L$3:{let t=j(r,1,void 0),n;if(t.$tag===1)n=t._0;else{t._0;break _L$3}e=N(n);break _L$2}break _L}L(t,e)}else if(F(r,{str:Xe,start:0,end:1})&&!F(r,{str:Ze,start:0,end:4})&&!F(r,{str:Qe,start:0,end:5})&&wn(r,{str:$e,start:0,end:1})&&r.length>2){let e;_L$2:{_L$3:{let t=j(r,1,r.length-1|0),n;if(t.$tag===1)n=t._0;else{t._0;break _L$3}e=N(n);break _L$2}break _L}L(t,e)}break _L}i=e+1|0;continue}else break}return t}function gr(e){let t=B(e,47);if(t.length===0)return;let n=D(t,t.length-1|0);if(F(n,{str:et,start:0,end:5})&&wn(n,{str:tt,start:0,end:2})&&n.length>7){let e;_L:{_L$2:{let t=j(n,5,n.length-2|0),r;if(t.$tag===1)r=t._0;else{t._0;break _L$2}e=N(r);break _L}return}return{name:e,optional:!0}}if(F(n,{str:nt,start:0,end:4})&&wn(n,{str:rt,start:0,end:1})&&n.length>5){let e;_L:{_L$2:{let t=j(n,4,n.length-1|0),r;if(t.$tag===1)r=t._0;else{t._0;break _L$2}e=N(r);break _L}return}return{name:e,optional:!1}}}function _r(e,t,n,r){let i=e.length,a=0;for(;;){let o=a;if(o<i){let i=e[o];switch(i.$tag){case 0:{let e=i,a=e._0,o=e._1,s=e._2,c=e._3,l=mr(`${t}${a}`),u=hr(l),d=gr(l);On(r,{pattern:l,param_names:u,component:o,layouts:qn(n),kind:0,title:s,meta:c,catch_all:d});break}case 2:{let e=i,n=e._0,a=e._1,o=mr(`${t}${n}`);On(r,{pattern:o,param_names:hr(o),component:a,layouts:[],kind:1,title:``,meta:[],catch_all:gr(o)});break}case 3:{let e=i,n=e._0,a=e._1,o=mr(`${t}${n}`);On(r,{pattern:o,param_names:hr(o),component:a,layouts:[],kind:2,title:``,meta:[],catch_all:gr(o)});break}default:{let e=i,a=e._0,o=e._1,s=e._2,c=mr(`${t}${a}`),l=qn(n);L(l,s),_r(o,c,l,r)}}a=o+1|0;continue}else return}}function vr(e,t){let n=[];return _r(e,t,[],n),n}function yr(){let e=it.val;return it.val=e+1|0,e}function br(e){let t=T.current_owner;t!==void 0&&kn(t.disposers,e)}function xr(e){let t=e.length-1|0;for(;;){let n=t;if(n>=0){en(e,n)(),t=n-1|0;continue}else break}Jn(e)}function Sr(e){let t=T.current_cleanups;return T.current_cleanups=e,t}function Cr(e,n){let r=Sr(new t(e));n(),T.current_cleanups=r}function wr(e,t){let n=T.current_subscriber;T.current_subscriber=e,t(),T.current_subscriber=n}function Tr(e){let t={active:!0,cleanups:[]},n=yr(),r={val:void 0},i=()=>{if(!t.active)return;xr(t.cleanups);let n=r.val;n!==void 0&&wr(n,()=>{Cr(t.cleanups,e)})};r.val={id:n,run:i},i();let a=()=>{t.active=!1,xr(t.cleanups)};return br(a),a}function Er(e){let t=T.current_subscriber;if(t!==void 0){let n=t;zn(Rn(e.subscribers),e=>e.id===n.id)||Dn(e.subscribers,n)}return e.value}function Dr(e){let t=T.current_subscriber;if(t!==void 0){let n=t;zn(Rn(e.subscribers),e=>e.id===n.id)||Dn(e.subscribers,n)}return e.value}function V(e){let t=T.current_subscriber;if(t!==void 0){let n=t;zn(Rn(e.subscribers),e=>e.id===n.id)||Dn(e.subscribers,n)}return e.value}function Or(e){return{value:e,subscribers:[]}}function kr(e){return{value:e,subscribers:[]}}function Ar(e){return{value:e,subscribers:[]}}function jr(e){return Or(e)}function Mr(e){return kr(e)}function Nr(e){return Ar(e)}function Pr(e){let t=T.pending_ids,n=t.length,r=0;for(;;){let i=r;if(i<n){if(t[i]===e)return!0;r=i+1|0;continue}else break}return!1}function Fr(e){if(T.batch_depth>0){if(Pr(e.id))return;An(T.pending_ids,e.id),Dn(T.pending_effects,e);return}else{let t=e.run;t();return}}function Ir(e){let t=e.subscribers,n=t.length,r=0;for(;;){let e=r;if(e<n){let n=t[e];Fr(n),r=e+1|0;continue}else return}}function Lr(e){let t=e.subscribers,n=t.length,r=0;for(;;){let e=r;if(e<n){let n=t[e];Fr(n),r=e+1|0;continue}else return}}function Rr(e){let t=e.subscribers,n=t.length,r=0;for(;;){let e=r;if(e<n){let n=t[e];Fr(n),r=e+1|0;continue}else return}}function zr(e,t){e.value=t,Ir(e)}function Br(e,t){e.value=t,Lr(e)}function Vr(e,t){e.value=t,Rr(e)}function Hr(e,t){e.value=t(e.value),Rr(e)}function Ur(e){let t=T.current_subscriber;T.current_subscriber=void 0;let n=e();return T.current_subscriber=t,n}function Wr(e){let t=T.current_subscriber;T.current_subscriber=void 0;let n=e();return T.current_subscriber=t,n}function Gr(e){let t=be(ve(),e());return Tr(()=>{$n(t,e())}),new Ce(t)}function Kr(e,t,n){if(t===`className`){tr(e,n);return}else if(t===`value`){me(e,`value`,n);return}else if(t===`checked`){me(e,`checked`,n===`true`);return}else if(t===`disabled`)if(n===`true`){nr(e,`disabled`,``);return}else{rr(e,`disabled`);return}else{nr(e,t,n);return}}function qr(e,t){nr(e,`style`,t)}function Jr(e,t,n){switch(n.$tag){case 0:{let r=n._0;if(t===`style`){qr(e,r);return}else{Kr(e,t,r);return}}case 1:{let r=n._0;Tr(()=>{let n=r();if(t===`style`){qr(e,n);return}else{Kr(e,t,n);return}});return}default:{let r=n._0;if(t===`__ref`){r(e);return}else{Te(e,t,r);return}}}}function Yr(e){return{inner:e}}function Xr(e){switch(e.$tag){case 0:return e._0.inner;case 1:return e._0;default:return e._0}}function H(e,t,n){let r=ye(ve(),e),i=t.length,a=0;for(;;){let e=a;if(e<i){let n=t[e],i=n._0,o=n._1;Jr(r,i,o),a=e+1|0;continue}else break}let o=n.length,s=0;for(;;){let e=s;if(e<o){let t=n[e];Qn(r,Xr(t)),s=e+1|0;continue}else break}return new Se(Yr(r))}function Zr(e,t){Qn(e.inner,Xr(t))}function Qr(e){$n(e.inner,``)}function $r(e){return new Ce(be(ve(),e))}function ei(e){return g(e,`toString`,[])}function ti(e,t){switch(e.$tag){case 0:{let n=e._0;t.method_table.method_0(t.self,n);return}case 1:{let n=e._0;t.method_table.method_0(t.self,ei(n));return}case 2:{let n=e._0;t.method_table.method_0(t.self,M(n,10));return}default:{let n=e._0;t.method_table.method_0(t.self,dn(n));return}}}function ni(e){return new n(fn(e))}function U(){return pe()}function W(e,t,r,a,o,s,c){let l=[];if(e===void 0||I(l,{_0:`id`,_1:new n(e)}),t===void 0||I(l,{_0:`className`,_1:new n(t)}),r===void 0||I(l,{_0:`style`,_1:new n(r)}),a.$tag===1){let e=a._0,t=Ee(e),n=t.length,r=0;for(;;){let e=r;if(e<n){let n=t[e];I(l,n),r=e+1|0;continue}else break}}if(o!==void 0){let e=o;I(l,{_0:`__ref`,_1:new i(t=>{e(t)})})}if(s.$tag===1){let e=s._0,t=e.length,n=0;for(;;){let r=n;if(r<t){let t=e[r];I(l,{_0:t._0,_1:ni(t._1)}),n=r+1|0;continue}else break}}if(c.$tag===1){let e=c._0,t=e.length,n=0;for(;;){let r=n;if(r<t){let t=e[r];I(l,t),n=r+1|0;continue}else break}}return l}function ri(e,t,n,i,a,o,s,c,l,u){let d=W(e,t,n,o,s,c,l);return i===void 0||I(d,{_0:`className`,_1:new r(i)}),a===void 0||I(d,{_0:`style`,_1:new r(a)}),H(`nav`,d,u)}function G(e,t,n,i,a,o,s,c,l,u){let d=W(e,t,n,o,s,c,l);return i===void 0||I(d,{_0:`className`,_1:new r(i)}),a===void 0||I(d,{_0:`style`,_1:new r(a)}),H(`div`,d,u)}function ii(e,t,n,i,a,o,s,c,l,u){let d=W(e,t,n,o,s,c,l);return i===void 0||I(d,{_0:`className`,_1:new r(i)}),a===void 0||I(d,{_0:`style`,_1:new r(a)}),H(`span`,d,u)}function K(e,t,n,i,a,o,s,c,l,u){let d=W(e,t,n,o,s,c,l);return i===void 0||I(d,{_0:`className`,_1:new r(i)}),a===void 0||I(d,{_0:`style`,_1:new r(a)}),H(`p`,d,u)}function ai(e,t,i,a,o,s,c,l,u,d,f,p){let m=W(i,a,o,l,u,d,f);return e===void 0||I(m,{_0:`href`,_1:new n(e)}),t===void 0||I(m,{_0:`target`,_1:new n(t)}),s===void 0||I(m,{_0:`className`,_1:new r(s)}),c===void 0||I(m,{_0:`style`,_1:new r(c)}),H(`a`,m,p)}function q(e,t,n,i,a,o,s,c,l,u){let d=W(e,t,n,o,s,c,l);return i===void 0||I(d,{_0:`className`,_1:new r(i)}),a===void 0||I(d,{_0:`style`,_1:new r(a)}),H(`h1`,d,u)}function oi(e,t,n,i,a,o,s,c,l,u){let d=W(e,t,n,o,s,c,l);return i===void 0||I(d,{_0:`className`,_1:new r(i)}),a===void 0||I(d,{_0:`style`,_1:new r(a)}),H(`h2`,d,u)}function si(e,t,n,i,a,o,s,c,l,u){let d=W(e,t,n,o,s,c,l);return i===void 0||I(d,{_0:`className`,_1:new r(i)}),a===void 0||I(d,{_0:`style`,_1:new r(a)}),H(`h3`,d,u)}function ci(e,t,n,i,a,o,s,c,l,u){let d=W(e,t,n,o,s,c,l);return i===void 0||I(d,{_0:`className`,_1:new r(i)}),a===void 0||I(d,{_0:`style`,_1:new r(a)}),H(`ul`,d,u)}function J(e,t,n,i,a,o,s,c,l,u){let d=W(e,t,n,o,s,c,l);return i===void 0||I(d,{_0:`className`,_1:new r(i)}),a===void 0||I(d,{_0:`style`,_1:new r(a)}),H(`li`,d,u)}function Y(e,t,n,i,a,o,s,c,l,u,d,f){let p=W(t,n,i,c,l,u,d);if(e===-1||e===!0&&I(p,at),a===void 0||I(p,{_0:`className`,_1:new r(a)}),o===void 0||I(p,{_0:`style`,_1:new r(o)}),s!==void 0){let e=s;I(p,{_0:`disabled`,_1:new r(()=>dn(e()))})}return H(`button`,p,f)}function li(e,t,n,i,a,o,s,c,l){let u=W(e,t,n,o,s,c,l);return i===void 0||I(u,{_0:`className`,_1:new r(i)}),a===void 0||I(u,{_0:`style`,_1:new r(a)}),H(`hr`,u,[])}function X(e){return $r(e)}function ui(e){return Gr(e)}function di(){let e=De(),t=Oe();return t===``?e:`${e}${t}`}function fi(e){let t=di();zr(e.current_path,t),Br(e.current_match,pr(t,e.routes))}function pi(e,t){let n=vr(e,t),r=di(),i=pr(r,n),a={routes:n,base:t,current_path:jr(r),current_match:Mr(i)};return Ae(()=>{fi(a)}),a}function mi(e,t){zr(e.current_path,t),Br(e.current_match,pr(t,e.routes))}function Z(e,t){ke(t),mi(e,t)}function hi(e){return Er(e.current_path)}function Q(e){g(de(Zn(),`console`),`log`,[e])}function gi(){return[new y(``,`home`,`Home`,[]),new y(`/about`,`about`,`About`,[]),new je(`/users`,[new y(``,`users_list`,`Users`,[]),new y(`/:id`,`user_detail`,`User Detail`,[])],`users_layout`),new je(`/settings`,[new y(``,`settings_index`,`Settings`,[]),new y(`/profile`,`settings_profile`,`Profile Settings`,[])],`settings_layout`)]}function $(e,t,n){return ai(t,void 0,void 0,void 0,void 0,void 0,void 0,new x(v(U(),n=>{er(n),Z(e,t)})),void 0,S,w,[X(n)])}function _i(e){let t=e.base;return ri(void 0,void 0,st,void 0,void 0,b,void 0,S,w,[ii(void 0,void 0,ct,void 0,void 0,b,void 0,S,w,[$(e,t,`Home`)]),ii(void 0,void 0,lt,void 0,void 0,b,void 0,S,w,[$(e,`${t}/about`,`About`)]),ii(void 0,void 0,ut,void 0,void 0,b,void 0,S,w,[$(e,`${t}/users`,`Users`)]),ii(void 0,void 0,dt,void 0,void 0,b,void 0,S,w,[$(e,`${t}/settings`,`Settings`)])])}function vi(){let e=Nr(0);return Q(`Creating counter component, initial count: ${M(V(e),10)}`),G(void 0,ft,void 0,void 0,void 0,b,void 0,new C([pt]),w,[si(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[X(`Interactive Counter`)]),K(void 0,void 0,void 0,void 0,void 0,b,void 0,new C([mt]),w,[ui(()=>`Count: ${M(V(e),10)}`)]),G(void 0,ht,void 0,void 0,void 0,b,void 0,S,w,[Y(-1,void 0,void 0,void 0,void 0,void 0,void 0,new x(v(U(),t=>{Q(`Decrement clicked, current: ${M(V(e),10)}`),Hr(e,e=>e-1|0),Q(`After decrement: ${M(V(e),10)}`)})),void 0,new C([gt]),w,[X(`-`)]),Y(-1,void 0,void 0,void 0,void 0,void 0,void 0,new x(v(U(),t=>{Q(`Increment clicked, current: ${M(V(e),10)}`),Hr(e,e=>e+1|0),Q(`After increment: ${M(V(e),10)}`)})),void 0,new C([_t]),w,[X(`+`)]),Y(-1,void 0,void 0,void 0,void 0,void 0,void 0,new x(v(U(),t=>{Q(`Reset clicked`),Vr(e,0)})),void 0,new C([vt]),w,[X(`Reset`)])])])}function yi(e){return G(void 0,yt,void 0,void 0,void 0,b,void 0,new C([bt]),w,[q(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[X(`Welcome to Browser App`)]),K(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[X(`This is an example of the new Routes-based routing system.`)]),vi(),li(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w),oi(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[X(`Features`)]),ci(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[J(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[X(`Routes enum for declarative route definitions`)]),J(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[X(`Component ID-based resolution`)]),J(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[X(`Layout support for nested routes`)]),J(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[X(`Dynamic parameters with :id syntax`)]),J(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[X(`URLPattern API for matching`)])]),K(void 0,void 0,void 0,void 0,void 0,b,void 0,new C([xt]),w,[X(`Current path: `),ui(()=>hi(e))])])}function bi(e){return G(void 0,St,void 0,void 0,void 0,b,void 0,new C([Ct]),w,[q(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[X(`About`)]),K(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[X(`This app demonstrates the new routing architecture:`)]),ci(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[J(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[X(`ServerComponent: async data fetching on server`)]),J(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[X(`ClientComponent (Island): Hydration with luna:url`)]),J(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[X(`Layout: shared wrapper for nested routes`)])])])}function xi(e,t){let n=e.base;return G(void 0,wt,Tt,void 0,void 0,b,void 0,S,w,[G(void 0,void 0,Et,void 0,void 0,b,void 0,S,w,[oi(void 0,void 0,Dt,void 0,void 0,b,void 0,S,w,[X(`Users Section`)]),K(void 0,void 0,Ot,void 0,void 0,b,void 0,S,w,[X(`This is a layout wrapper for all /users/* routes`)])]),G(void 0,void 0,kt,void 0,void 0,b,void 0,S,w,[Y(-1,void 0,void 0,At,void 0,void 0,void 0,new x(v(U(),t=>{Z(e,`${n}/users`)})),void 0,S,w,[X(`User List`)]),Y(-1,void 0,void 0,jt,void 0,void 0,void 0,new x(v(U(),t=>{Z(e,`${n}/users/1`)})),void 0,S,w,[X(`User 1`)]),Y(-1,void 0,void 0,Mt,void 0,void 0,void 0,new x(v(U(),t=>{Z(e,`${n}/users/2`)})),void 0,S,w,[X(`User 2`)]),Y(-1,void 0,void 0,void 0,void 0,void 0,void 0,new x(v(U(),t=>{Z(e,`${n}/users/3`)})),void 0,S,w,[X(`User 3`)])]),t])}function Si(e){return G(void 0,Nt,void 0,void 0,void 0,b,void 0,S,w,[si(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[X(`User List`)]),ci(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[J(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[X(`User 1 - Alice`)]),J(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[X(`User 2 - Bob`)]),J(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[X(`User 3 - Charlie`)])])])}function Ci(e,t){let n=ar(t,`id`),r;r=n===void 0?`unknown`:n;let i;switch(r){case`1`:i=`Alice`;break;case`2`:i=`Bob`;break;case`3`:i=`Charlie`;break;default:i=`Unknown User`}return G(void 0,Pt,void 0,void 0,void 0,b,void 0,S,w,[si(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[X(`User Detail`)]),K(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[X(`User ID: ${r}`)]),K(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[X(`Name: ${i}`)]),K(void 0,void 0,Ft,void 0,void 0,b,void 0,S,w,[X(`(In a real app, this data would be fetched from an API)`)])])}function wi(e){let t=`${e.base}/settings/profile`;return G(void 0,It,void 0,void 0,void 0,b,void 0,S,w,[q(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[X(`Settings`)]),ci(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[J(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[ai(t,void 0,void 0,void 0,void 0,void 0,void 0,new x(v(U(),n=>{er(n),Z(e,t)})),void 0,S,w,[X(`Profile Settings`)])])])])}function Ti(e){let t=e.base;return G(void 0,Lt,void 0,void 0,void 0,b,void 0,S,w,[q(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[X(`Profile Settings`)]),K(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[X(`Edit your profile here.`)]),Y(-1,void 0,void 0,void 0,void 0,void 0,void 0,new x(v(U(),n=>{Z(e,`${t}/settings`)})),void 0,S,w,[X(`Back to Settings`)])])}function Ei(e){let t=e.base;return G(void 0,Rt,void 0,void 0,void 0,b,void 0,S,w,[q(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[X(`404 - Not Found`)]),K(void 0,void 0,void 0,void 0,void 0,b,void 0,S,w,[X(`Page not found: `),ui(()=>hi(e))]),Y(-1,void 0,void 0,void 0,void 0,void 0,void 0,new x(v(U(),n=>{Z(e,t)})),void 0,S,w,[X(`Go Home`)])])}function Di(e,t){let n=t.route.component,r=t.route.layouts;Q(`Resolving component: ${n}, layouts: ${M(r.length,10)}`);let i;switch(n){case`home`:i=yi(e);break;case`about`:i=bi(e);break;case`users_list`:i=Si(e);break;case`user_detail`:i=Ci(e,t);break;case`settings_index`:i=wi(e);break;case`settings_profile`:i=Ti(e);break;default:i=Ei(e)}let a=i,o=r.length-1|0;for(;o>=0;){let t=D(r,o),n;n=t===`users_layout`?xi(e,a):a,a=n,o=o-1|0}return a}function Oi(e,t){Tr(()=>{let n=Dr(e.current_match),r=e.current_path.value;Q(`Route changed (effect triggered): ${r}`),Qr(t);let i=Ur(()=>{let t=_i(e),r;return r=n===void 0?Ei(e):Di(e,n),{_0:t,_1:r}}),a=i._0,o=i._1;Zr(t,Wr(()=>G(void 0,zt,Bt,void 0,void 0,b,void 0,S,w,[a,G(void 0,void 0,Vt,void 0,void 0,b,void 0,S,w,[o])])))})}(()=>{Q(`Browser App Starting...`);let e=ir(ve(),`app`);if(e.$tag===1){let t=e._0,n=pi(gi(),ot),r=n.routes,i=r.length,a=0;for(;;){let e=a;if(e<i){let t=r[e];Q(`Compiled route: pattern=${t.pattern}, component=${t.component}`),a=e+1|0;continue}else break}Q(`Router created with path: ${hi(n)}`),Oi(n,Yr(t)),Q(`App rendered!`);return}else{Q(`ERROR: #app container not found`);return}})();