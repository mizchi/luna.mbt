///| Counter Client Component
///|
///| Client components receive Props and return @luna.Node[Unit].
///| Hydration functions are auto-generated by `sol generate`.

///| Action enum for type-safe event handling
pub enum CounterAction {
  Increment
  Decrement
} derive(Show)

///| Props passed from server
pub(all) struct CounterProps {
  initial_count : Int
} derive(ToJson, FromJson)

///| Counter component
pub fn counter(props : CounterProps) -> @luna.Node[Unit] {
  let count = @signal.signal(props.initial_count)
  @luna.h("div", [("class", @luna.attr_static("counter"))], [
    @luna.h("span", [("class", @luna.attr_static("count-display"))], [
      @luna.vtext_sig(count),
    ]),
    @luna.h("div", [("class", @luna.attr_static("buttons"))], [
      @luna.h(
        "button",
        [
          ("class", @luna.attr_static("dec")),
          ("onclick", @luna.action(Decrement)),
        ],
        [@luna.vtext("-")],
      ),
      @luna.h(
        "button",
        [
          ("class", @luna.attr_static("inc")),
          ("onclick", @luna.action(Increment)),
        ],
        [@luna.vtext("+")],
      ),
    ]),
  ])
}
