{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://luna.dev/schemas/page.json",
  "title": "Luna Page Configuration",
  "description": "Configuration for Luna page.json files",
  "type": "object",
  "properties": {
    "mode": {
      "type": "string",
      "enum": ["static", "ssr", "isr", "spa"],
      "description": "Rendering mode for the page",
      "default": "static"
    },
    "revalidate": {
      "type": "integer",
      "minimum": 0,
      "description": "ISR revalidation interval in seconds (only for mode: isr)"
    },
    "title": {
      "type": "string",
      "description": "Page title"
    },
    "description": {
      "type": "string",
      "description": "Page description for SEO"
    },
    "layout": {
      "type": "string",
      "description": "Layout identifier to use for this page"
    },
    "islands": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "List of island components to hydrate on client"
    },
    "generateParams": {
      "type": "boolean",
      "description": "Generate static params for dynamic routes (deprecated, use staticParams)",
      "default": false,
      "deprecated": true
    },
    "staticParams": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": {
          "type": "string"
        }
      },
      "description": "Static parameters for pre-generation of dynamic routes"
    },
    "fallback": {
      "type": "boolean",
      "description": "Enable SPA fallback for this route segment",
      "default": false
    },
    "spa": {
      "type": "boolean",
      "description": "Mark this segment as a SPA zone (enables client-side routing within)",
      "default": false
    },
    "fallbackBehavior": {
      "type": "string",
      "enum": ["spa", "404"],
      "description": "Behavior for unmatched routes in this segment: 'spa' (client router) or '404' (not found page)",
      "default": "404"
    },
    "extends": {
      "type": "string",
      "description": "Path to parent page.json to inherit configuration from"
    },
    "handlers": {
      "type": "object",
      "description": "File type specific handlers",
      "additionalProperties": {
        "$ref": "#/definitions/FileHandlerConfig"
      }
    },
    "component": {
      "$ref": "#/definitions/ComponentConfig",
      "description": "Component directory configuration (for moon.pkg.json directories)"
    }
  },
  "definitions": {
    "FileHandlerConfig": {
      "type": "object",
      "properties": {
        "layout": {
          "type": "string",
          "description": "Layout for this file type"
        },
        "islands": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Islands to hydrate for this file type"
        },
        "passthrough": {
          "type": "boolean",
          "description": "Pass through without processing",
          "default": false
        }
      }
    },
    "ComponentConfig": {
      "type": "object",
      "properties": {
        "propsType": {
          "type": "string",
          "description": "Props struct name (e.g., \"CounterProps\")"
        },
        "clientExport": {
          "type": "string",
          "description": "Client export function name (e.g., \"counter\")"
        },
        "serverExport": {
          "type": "string",
          "description": "Server export function name (e.g., \"render_ssr\")"
        }
      }
    }
  },
  "additionalProperties": false
}
