((d,w)=>{const S={};d.querySelectorAll('script[data-resumable-state]').forEach(s=>{const i=s.getAttribute('data-resumable-state')||'_';S[i]=JSON.parse(s.textContent)});const L=async(i,u)=>{if(S[i])return S[i];const r=await fetch(u);S[i]=await r.json();return S[i]},F=e=>{while(e&&e!==d){const i=e.getAttribute('data-state-id');if(i)return{id:i,el:e};e=e.parentElement}return{id:'_',el:d.body}},H=async e=>{let t=e.target,n='on:'+e.type;while(t&&t!==d){const a=t.getAttribute(n);if(a){const c=F(t),u=c.el.getAttribute('data-state-src');let s=S[c.id];if(!s&&u)s=await L(c.id,u);const[m,f]=a.split('#'),x=await import(m),fn=x[f]||x.default;if(fn)fn(e,t,s||[],c.id);break}t=t.parentElement}};['click','input','change','submit','keydown','keyup','focus','blur'].forEach(e=>d.addEventListener(e,H,{capture:!0}));w.__STATE__=S;w.__RESUME__=(n,t)=>H({type:n,target:t});w.__LOAD__=L})(document,window);
